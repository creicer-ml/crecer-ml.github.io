{% extends 'base.html' %}
{% load static %}
{% block head %}
{% load mathfilters %}
{% load humanize %}
<style>
    .fondo_productos{
        background-color: #fff;
        margin-top: 20px;
        padding: 5px;
        border-radius: 50px;
        margin-left: 15%;
        margin-right: 15%;
    }
    .card-img-top-container {
        max-height: 300px; /* Ajusta aquí el valor de altura máxima deseado */
        overflow: hidden;
    }

    .card-content {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }

    .card-button-container {
        margin-top: auto;
    }

    .contenedor_carrusel{
        display: grid;
        justify-self: center;
        justify-content: c;
    }

    .carousel-item img {
        border-radius: 15px;
        background-color: #fff;
        padding: 10px; 
        margin-left: 25%;
        margin-right: 25%;
        max-width: 50%;
        height: 450px; 
    }

    @media screen and (max-width:900px){
        .text-white{
            font-size: 25px;
        }

        .carousel-caption > .h3{
            font-size: 15px;
        }

        .carousel-item img {
            height: 400px;
        }
    }
    .carousel-caption h5,
    .carousel-caption p {
        font-size: 10px;
  }

    @media (max-width: 768px) {

        .text-white{
            font-size: 15px;
        }

        .carousel-caption > .h3{
            font-size: 10px;
        }
        .carousel-item img {
            height: 400px;
        }
    }
    .carousel-caption h5,
    .carousel-caption p {
        font-size: 20px;
        font-weight: bold;
  }

</style>
{% endblock %}

{% block content %}

<!-- CARRUSEL -->
<div class="carrusel_conteiner">
    <div class="container-fluid">
    
      <div id="carousel1" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carousel1" data-slide-to="0" class="active"></li>
          <li data-target="#carousel1" data-slide-to="1"></li>
          <li data-target="#carousel1" data-slide-to="2"></li>
        </ol>
        <!-- diapositivas -->
        <div class="carousel-inner ">
          
          <div class="carousel-item active">
            <a href="#"><img class="d-block w-100" src="{% static 'img/guitarras.jpg' %}" alt=""> </a>
              <div class="carousel-caption">
                <h1 class="text-white">Bienvenido a MusicPRO</h1>
                <p class="h3">Los mejores artículos musicales se encuentran acá</p>
              </div>
          </div>
          <div class="carousel-item">
              <img class="d-block w-100" src="{% static 'img/reproductor.jpg' %}" alt="">
              <div class="carousel-caption">
                <h1 class="text-white">LOREM IPSUM</h1>
                <p class="h3">LOREM IPSUM AGREGA MAS TEXTO</p>
              </div>
          </div>
          <div class="carousel-item">
              <img class="d-block w-100" src="{% static 'img/mas-instrumentos.jpg' %}" alt="">
              <div class="carousel-caption">
               <h1 class="text-white">LOREM IPSUM</h1>
                <p class="h3">LOREM IPSUM AGREGA MAS TEXTO</p>
              </div>
          </div>
        </div>
        <!-- botones de desplazamiento a izquierda y derecha -->      
        <a class="carousel-control-next" href="#carousel1" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
  </div>
</div>



<div class="fondo_productos">
<div class="container mt-5">
    <h1>Productos</h1>

    <form method="GET" action="{% url 'index' %}">
        <label for="categoria">Filtrar por categoría:</label>
        <select name="categoria" id="categoria">
            <option value="">Todos</option>
            {% for categoria in categorias %}
                <option value="{{ categoria.nombre }}" {% if categoria_filtrada == categoria.nombre %}selected{% endif %}>{{ categoria.nombre }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Filtrar</button>
    </form>

    <!-- conversor de monedas -->
    <form method="GET" action="{% url 'index' %}">
        <label for="moneda">Cambiar moneda:</label>
        <select name="moneda" id="moneda">
            <!-- <option value="">CLP</option> -->
            <option {% if moneda == "AED" %}selected{% endif %} value="AED">AED</option>
            <option {% if moneda == "ARS" %}selected{% endif %} value="ARS">ARS</option>
            <option {% if moneda == "AUD" %}selected{% endif %} value="AUD">AUD</option>
            <option {% if moneda == "BGN" %}selected{% endif %} value="BGN">BGN</option>
            <option {% if moneda == "BRL" %}selected{% endif %} value="BRL">BRL</option>
            <option {% if moneda == "BSD" %}selected{% endif %} value="BSD">BSD</option>
            <option {% if moneda == "CAD" %}selected{% endif %} value="CAD">CAD</option>
            <option {% if moneda == "CHF" %}selected{% endif %} value="CHF">CHF</option>
            <option {% if moneda == "CLP" %}selected{% endif %} value="CLP" selected>CLP</option>
            <option {% if moneda == "CNY" %}selected{% endif %} value="CNY">CNY</option>
            <option {% if moneda == "COP" %}selected{% endif %} value="COP">COP</option>
            <option {% if moneda == "CZK" %}selected{% endif %} value="CZK">CZK</option>
            <option {% if moneda == "DKK" %}selected{% endif %} value="DKK">DKK</option>
            <option {% if moneda == "DOP" %}selected{% endif %} value="DOP">DOP</option>
            <option {% if moneda == "EGP" %}selected{% endif %} value="EGP">EGP</option>
            <option {% if moneda == "EUR" %}selected{% endif %} value="EUR">EUR</option>
            <option {% if moneda == "FJD" %}selected{% endif %} value="FJD">FJD</option>
            <option {% if moneda == "GBP" %}selected{% endif %} value="GBP">GBP</option>
            <option {% if moneda == "GTQ" %}selected{% endif %} value="GTQ">GTQ</option>
            <option {% if moneda == "HKD" %}selected{% endif %} value="HKD">HKD</option>
            <option {% if moneda == "HRK" %}selected{% endif %} value="HRK">HRK</option>
            <option {% if moneda == "HUF" %}selected{% endif %} value="HUF">HUF</option>
            <option {% if moneda == "IDR" %}selected{% endif %} value="IDR">IDR</option>
            <option {% if moneda == "ILS" %}selected{% endif %} value="ILS">ILS</option>
            <option {% if moneda == "INR" %}selected{% endif %} value="INR">INR</option>
            <option {% if moneda == "ISK" %}selected{% endif %} value="ISK">ISK</option>
            <option {% if moneda == "JPY" %}selected{% endif %} value="JPY">JPY</option>
            <option {% if moneda == "KRW" %}selected{% endif %} value="KRW">KRW</option>
            <option {% if moneda == "KZT" %}selected{% endif %} value="KZT">KZT</option>
            <option {% if moneda == "MXN" %}selected{% endif %} value="MXN">MXN</option>
            <option {% if moneda == "MYR" %}selected{% endif %} value="MYR">MYR</option>
            <option {% if moneda == "NOK" %}selected{% endif %} value="NOK">NOK</option>
            <option {% if moneda == "NZD" %}selected{% endif %} value="NZD">NZD</option>
            <option {% if moneda == "PAB" %}selected{% endif %} value="PAB">PAB</option>
            <option {% if moneda == "PEN" %}selected{% endif %} value="PEN">PEN</option>
            <option {% if moneda == "PHP" %}selected{% endif %} value="PHP">PHP</option>
            <option {% if moneda == "PKR" %}selected{% endif %} value="PKR">PKR</option>
            <option {% if moneda == "PLN" %}selected{% endif %} value="PLN">PLN</option>
            <option {% if moneda == "PYG" %}selected{% endif %} value="PYG">PYG</option>
            <option {% if moneda == "RON" %}selected{% endif %} value="RON">RON</option>
            <option {% if moneda == "RUB" %}selected{% endif %} value="RUB">RUB</option>
            <option {% if moneda == "SAR" %}selected{% endif %} value="SAR">SAR</option>
            <option {% if moneda == "SEK" %}selected{% endif %} value="SEK">SEK</option>
            <option {% if moneda == "SGD" %}selected{% endif %} value="SGD">SGD</option>
            <option {% if moneda == "THB" %}selected{% endif %} value="THB">THB</option>
            <option {% if moneda == "TRY" %}selected{% endif %} value="TRY">TRY</option>
            <option {% if moneda == "TWD" %}selected{% endif %} value="TWD">TWD</option>
            <option {% if moneda == "UAH" %}selected{% endif %} value="UAH">UAH</option>
            <option {% if moneda == "USD" %}selected{% endif %} value="USD">USD</option>
            <option {% if moneda == "UYU" %}selected{% endif %} value="UYU">UYU</option>
            <option {% if moneda == "VND" %}selected{% endif %} value="VND">VND</option>
            <option {% if moneda == "ZAR" %}selected{% endif %} value="ZAR">ZAR</option>
        </select>
        <button type="submit" class="btn btn-primary">Cambiar moneda</button>
    </form>

    <div class="row mb-5">
        {% if productos %}
            {% for p in productos %}
            <div class="col-12 col-md-4" style="margin-top: 20px;">
                <div class="card text-center card-content">
                    {% if p.imagen %}
                        <img src="{{ p.imagen.url }}" alt="{{producto.nombre}}" class="card-img-top-container mx-auto img-fluid">
                    {% else %} 
                        <img src="{% static 'img/rayo.jpg' %}" class="card-img-top mx-auto img-fluid">
                    {% endif %} 
                    <div class="card-body">
                        <h4 class="card-title"> {{ p.nombre }} </h4>
                        <h5>
                            {% if conversion.result == "success" %}
                                $ {{ p.precio|mul:conversion.conversion_rate|floatformat:2|intcomma }}
                            {% else %}
                                ${{p.precio|intcomma}}
                            {% endif %}
                        </h5>
                        <p class="card-text">
                            {{ p.categoria }}
                        </p>
                    </div>
                    <div class="card-button-container">
                        <a href="{% url 'agregar' p.codigo_producto %}" class="btn btn-danger">Comprar</a>
                        <a href="{% url 'producto_detalles' p.codigo_producto %}" class="btn btn-warning text-white">Ver detalle</a>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p>No hay productos disponibles</p>
        {% endif %}
    </div>
</div>
</div>

{% endblock %}








